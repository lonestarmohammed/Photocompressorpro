<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <!-- Open Graph Meta Tags -->
<meta property="og:title" content="Photo Compressor Pro - Free Online Image Compression Tool">
<meta property="og:description" content="Compress your images online quickly and for free. Save space without losing quality.">
<meta property="og:image" content="https://www.photocompressorpro.com/assets/og-image.png">
<meta property="og:url" content="https://www.photocompressorpro.com/">
<meta property="og:type" content="website">

<!-- Twitter Card (optional but good for SEO) -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Photo Compressor Pro - Free Online Image Compression Tool">
<meta name="twitter:description" content="Compress your images online quickly and for free. Save space without losing quality.">
<meta name="twitter:image" content="https://www.photocompressorpro.com/assets/og-image.png">
  <!-- Primary Meta Tags -->
<title>Photo Compressor Pro - Free Online Image Compressor</title>
<meta name="title" content="Photo Compressor Pro - Free Online Image Compressor">
<meta name="description" content="Compress images online without losing quality. Free tool to reduce image size for faster uploads and better performance.">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://www.photocompressorpro.com/">
<meta property="og:title" content="Photo Compressor Pro - Free Online Image Compressor">
<meta property="og:description" content="Compress images online without losing quality. Free tool to reduce image size for faster uploads and better performance.">
<meta property="og:image" content="https://www.photocompressorpro.com/assets/og-image.png">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://www.photocompressorpro.com/">
<meta property="twitter:title" content="Photo Compressor Pro - Free Online Image Compressor">
<meta property="twitter:description" content="Compress images online without losing quality. Free tool to reduce image size for faster uploads and better performance.">
<meta property="twitter:image" content="https://www.photocompressorpro.com/assets/og-image.png">
  <title>Photo Compressor Pro ‚Äì Compress Images Online</title>
  <meta name="description" content="Free online image compressor. Reduce JPG/PNG size without losing visible quality. Fast, secure, and runs in your browser.">
  <title>Photo Compressor Pro - Free Online Image Compression Tool</title>
<meta name="description" content="Compress images online instantly with Photo Compressor Pro. Free, fast, and high-quality image compression without losing clarity. Perfect for web, social media, and storage.">
  <title>Free Image Compressor Online - Reduce Image Size Easily</title>
<meta name="description" content="Use our free Image Compressor to reduce image size online without losing quality. Compress JPG, PNG, and WebP images quickly for websites, emails, and social media.">
  <link rel="icon" href="assets/favicon.ico" type="image/x-icon">

  <!-- Keep your AdSense verification script in <head> (as you already added). -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9087913537288549"
     crossorigin="anonymous"></script>
  <style>
    :root{
      --brand:#1f6fff;
      --ink:#0f172a;
      --muted:#6b7280;
      --bg:#f6f8fb;
      --card:#ffffff;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;background:var(--bg);color:var(--ink)}
    /* Header */
    header.site-header{
      position:sticky;top:0;z-index:50;
      backdrop-filter:saturate(180%) blur(8px);
      background:linear-gradient(180deg, rgba(255,255,255,.95), rgba(255,255,255,.85));
      border-bottom:1px solid rgba(15,23,42,.06);
    }
    .nav-wrap{max-width:1000px;margin:0 auto;padding:12px 16px;display:flex;align-items:center;justify-content:space-between}
    .brand{text-decoration:none;color:var(--ink);font-weight:800;letter-spacing:.2px}
    .brand .accent{color:var(--brand)}
    nav a{color:var(--ink);text-decoration:none;margin-left:16px;font-weight:600}
    nav a:hover{color:var(--brand)}
    @media (max-width:680px){
      .nav-wrap{flex-direction:column;gap:8px}
      nav a{margin:0 8px}
    }

    /* Main card */
    main{max-width:900px;margin:34px auto;padding:0 16px}
    .card{
      background:var(--card);border-radius:16px;
      box-shadow:0 8px 28px rgba(0,0,0,.06);
      padding:24px;
    }
    .hero{
      text-align:center;margin-bottom:14px
    }
    .hero h1{margin:0 0 6px;font-size:1.7rem}
    .hero p{margin:0;color:var(--muted)}

    /* Uploader */
    .uploader{
      border:2px dashed rgba(15,23,42,.12);
      border-radius:14px;
      padding:22px;
      background:#fafbff;
      display:flex;flex-direction:column;align-items:center;gap:12px;
      text-align:center;
    }
    .uploader input[type=file]{display:none}
    .btn{
      appearance:none;border:0;border-radius:12px;cursor:pointer;
      background:linear-gradient(90deg, var(--brand), #00c2ff);
      color:#fff;padding:12px 18px;font-weight:700;
      box-shadow:0 10px 22px rgba(31,111,255,.22);
    }
    .btn.secondary{background:#eef2ff;color:#1f3a8a;box-shadow:none}
    .hint{font-size:.92rem;color:var(--muted)}
    .dragging{background:#eef4ff;border-color:var(--brand)}
    .controls{display:flex;gap:14px;align-items:center;justify-content:center;flex-wrap:wrap;margin-top:12px}
    .range{width:240px}
    .kvs{font-weight:700;color:var(--brand)}

    /* Output */
    .output{
      margin-top:18px;display:grid;gap:16px;
      grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
    }
    .thumb{
      background:#fff;border:1px solid rgba(15,23,42,.08);border-radius:12px;padding:12px;text-align:center
    }
    .thumb img{max-width:100%;border-radius:8px;border:1px solid rgba(15,23,42,.06)}
    .meta{font-size:.85rem;color:var(--muted);margin:8px 0}
    .thumb .btn{width:100%}

    footer{margin:30px 0 24px;text-align:center;color:var(--muted);font-size:.9rem}
  </style>
</head>
<body>
  <!-- Header -->
  <header class="site-header">
    <div class="nav-wrap">
      <a class="brand" href="index.html">Photo<span class="accent">Compressor</span>Pro</a>
      <nav>
  <a href="index.html">Home</a>
  <a href="tools/image-to-pdf.html">Image ‚Üí PDF</a>
  <a href="tools/background-remover.html">Background Remover</a>
  <a href="blog.html">Blog</a>
  <a href="contact.html">Contact</a>
</nav>
    </div>
  </header>

  <!-- Main -->
  <main>
    <section class="card">
      <div class="hero">
        <h1>Compress Images Online (JPG/PNG)</h1>
        <p>Fast, secure, and runs in your browser. No uploads. No sign-up.</p>
      </div>

      <!-- Uploader -->
      <div id="drop" class="uploader">
        <div class="hint" id="fileStatus">No files selected</div>

        <!-- Controls (ONE choose button, ONE hidden input) -->
<div class="controls">
  <label class="btn secondary" for="fileInput">üìÅ Choose Images</label>
  <input id="fileInput" type="file" accept="image/*" multiple style="display:none">

  <!-- Quality -->
  <label class="quality-label" for="quality">Quality</label>
  <input id="quality" class="quality-range" type="range" min="40" max="95" step="1" value="75">
  <span class="quality-value"><span id="qv">75</span>%</span>

  <!-- Action -->
  <button id="compress" class="btn">Compress & Download</button>
</div>

<!-- Results grid (keep this if it was removed) -->
<div id="out" class="output"></div>

      <!-- Output Grid -->
      <div id="out" class="output"></div>
    </section>
  </main>

  <footer>
    ¬© 2025 PhotoCompressorPro.com ‚Ä¢ <a href="privacy.html">Privacy</a> ‚Ä¢ <a href="about.html">About</a> ‚Ä¢ <a href="contact.html">Contact</a>
  </footer>

  <script>
    // Elements
    const fileInput = document.getElementById('fileInput');
    const drop = document.getElementById('drop');
    const quality = document.getElementById('quality');
    const qv = document.getElementById('qv');
    const compressBtn = document.getElementById('compress');
    const out = document.getElementById('out');

    // Update quality label
    quality.addEventListener('input', ()=> qv.textContent = quality.value);

    // Drag & drop handlers
    <!-- Drop zone (no extra choose button here) -->
<div id="drop" class="uploader">
  <div class="hint" id="fileStatus">No files selected ‚Äî or drag & drop here</div>
</div>

    // Core compression
    function compressFile(file, q){
      return new Promise((resolve, reject)=>{
        const reader = new FileReader();
        reader.onload = e=>{
          const img = new Image();
          img.onload = ()=>{
            const canvas = document.createElement('canvas');
            canvas.width = img.width;
            canvas.height = img.height;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(img, 0, 0);

            // Choose output type based on input; default JPEG for big savings
            const isPNG = file.type.includes('png');
            const mime = isPNG ? 'image/png' : 'image/jpeg';
            const qualityFloat = isPNG ? undefined : q/100;

            canvas.toBlob(blob=>{
              if(!blob) return reject(new Error('Compression failed'));
              resolve({ blob, width: img.width, height: img.height, name: file.name, type: mime });
            }, mime, qualityFloat);
          };
          img.onerror = reject;
          img.src = e.target.result;
        };
        reader.onerror = reject;
        reader.readAsDataURL(file);
      });
    }

    function formatKB(bytes){
      return Math.round(bytes/1024) + ' KB';
    }

    async function handleCompress(){
      const files = [...fileInput.files];
      if(!files.length){ alert('Please choose at least one image.'); return; }
      compressBtn.disabled = true; compressBtn.textContent = 'Processing‚Ä¶';

      out.innerHTML = '';
      const q = parseInt(quality.value, 10);

      for(const f of files){
        try{
          const beforeSize = f.size;
          const { blob, width, height, name } = await compressFile(f, q);
          const url = URL.createObjectURL(blob);

          const card = document.createElement('div');
          card.className = 'thumb';
          card.innerHTML = `
            <img src="${url}" alt="Compressed preview">
            <div class="meta">${name.replace(/</g,'&lt;')} ‚Ä¢ ${width}√ó${height}</div>
            <div class="meta">Before: ${formatKB(beforeSize)} ‚Ä¢ After: ${formatKB(blob.size)}</div>
          `;
          const a = document.createElement('a');
          a.className = 'btn';
          a.href = url;
          a.download = 'compressed-' + name.replace(/\s+/g,'-');
          a.textContent = 'Download';
          card.appendChild(a);

          out.appendChild(card);
        }catch(err){
          console.error(err);
          alert('Failed to compress: ' + f.name);
        }
      }

      compressBtn.disabled = false; compressBtn.textContent = 'Compress & Download';
    }

    compressBtn.addEventListener('click', handleCompress);
  </script>
  <script>
  // Helper: nice KB/MB display
  function prettyBytes(bytes){
    if (bytes < 1024) return bytes + ' B';
    const kb = bytes / 1024;
    if (kb < 1024) return Math.round(kb) + ' KB';
    const mb = kb / 1024;
    return (Math.round(mb * 10) / 10) + ' MB';
  }

  // Update the UI to show selected files
  function updateSelectionUI(files){
    const statusEl = document.getElementById('fileStatus');
    const labelEl  = document.querySelector('label[for="fileInput"]');

    if (!files || !files.length) {
      statusEl.textContent = 'No files selected';
      if (labelEl) labelEl.textContent = 'üìÅ Choose Images';
      return;
    }

    if (files.length === 1) {
      statusEl.textContent = `Selected: ${files[0].name} ‚Äî ${prettyBytes(files[0].size)}`;
      if (labelEl) labelEl.textContent = 'üìÅ 1 file selected';
    } else {
      const total = [...files].reduce((s,f)=>s+f.size,0);
      statusEl.textContent = `Selected: ${files.length} files ‚Äî ${prettyBytes(total)} total`;
      if (labelEl) labelEl.textContent = `üìÅ ${files.length} files selected`;
    }
  }

  // Hook into your existing input & drop events
  const fileInputEl = document.getElementById('fileInput');
  const dropZoneEl  = document.getElementById('drop');

  fileInputEl.addEventListener('change', () => updateSelectionUI(fileInputEl.files));

  // When using drag & drop, you likely already set:
  // fileInput.files = e.dataTransfer.files;
  // Just call updateSelectionUI after that:
  dropZoneEl.addEventListener('drop', () => updateSelectionUI(fileInputEl.files));
</script>
  <script>
  // Quality label sync
  (function(){
    const slider = document.getElementById('quality');
    const qv = document.getElementById('qv');
    if (!slider || !qv) return;
    const update = ()=> qv.textContent = slider.value;
    slider.addEventListener('input', update);
    slider.addEventListener('change', update);
    update();
  })();

  // If your previous code defines handleCompress, re-hook the button:
  (function(){
    const btn = document.getElementById('compress');
    if (!btn) return;
    if (typeof handleCompress === 'function') {
      btn.addEventListener('click', handleCompress);
    }
  })();
</script>
<script>
  // ====== elements (must exist in your HTML) ======
  const fileInput   = document.getElementById('fileInput');  // <input type="file" multiple>
  const qualityEl   = document.getElementById('quality');    // <input type="range">
  const qv          = document.getElementById('qv');         // <span id="qv">75</span>
  const compressBtn = document.getElementById('compress');   // <button id="compress">
  const out         = document.getElementById('out');        // <div id="out">
  const dropZone    = document.getElementById('drop');       // optional drop zone

  // Keep label in sync
  if (qualityEl && qv) {
    const sync = () => (qv.textContent = qualityEl.value);
    qualityEl.addEventListener('input', sync);
    qualityEl.addEventListener('change', sync);
    sync();
  }

  // Optional: drag & drop to the same file input
  if (dropZone && fileInput) {
    ['dragenter','dragover'].forEach(evt=>{
      dropZone.addEventListener(evt, e => { e.preventDefault(); e.stopPropagation(); dropZone.classList.add('dragging'); });
    });
    ['dragleave','drop'].forEach(evt=>{
      dropZone.addEventListener(evt, e => { e.preventDefault(); e.stopPropagation(); dropZone.classList.remove('dragging'); });
    });
    dropZone.addEventListener('drop', e => { fileInput.files = e.dataTransfer.files; updateSelectionUI(); });
  }

  // Show selection status (optional)
  function prettyKB(bytes){ return Math.round(bytes/1024) + ' KB'; }
  function updateSelectionUI(){
    const status = document.getElementById('fileStatus'); // optional element
    const label  = document.querySelector('label[for="fileInput"]');
    if (!fileInput) return;
    const files = [...fileInput.files];
    if (!files.length) {
      if (status) status.textContent = 'No files selected ‚Äî or drag & drop here';
      if (label)  label.textContent  = 'üìÅ Choose Images';
      return;
    }
    if (files.length === 1) {
      if (status) status.textContent = `Selected: ${files[0].name} ‚Äî ${prettyKB(files[0].size)}`;
      if (label)  label.textContent  = 'üìÅ 1 file selected';
    } else {
      const total = files.reduce((s,f)=>s+f.size,0);
      if (status) status.textContent = `Selected: ${files.length} files ‚Äî ${prettyKB(total)} total`;
      if (label)  label.textContent  = `üìÅ ${files.length} files selected`;
    }
  }
  if (fileInput) fileInput.addEventListener('change', updateSelectionUI);

  // ====== compression helpers ======
  function safeName(name){ return name.replace(/[^\w.\-]+/g,'-'); }
  function looksLikePNG(file){ return (file.type && file.type.toLowerCase().includes('png')) || /\.png$/i.test(file.name); }
  function dataURLToBlob(dataURL){
    const [meta,b64] = dataURL.split(',');
    const mime = (meta.match(/:(.*?);/)||[])[1] || 'application/octet-stream';
    const bin  = atob(b64);
    const len  = bin.length;
    const buf  = new Uint8Array(len);
    for (let i=0;i<len;i++) buf[i] = bin.charCodeAt(i);
    return new Blob([buf], { type: mime });
  }
  function canvasHasAlpha(ctx, w, h, step=12){
    try {
      const d = ctx.getImageData(0,0,w,h).data;
      for (let y=0;y<h;y+=step){
        for (let x=0;x<w;x+=step){
          if (d[(y*w + x)*4 + 3] < 255) return true;
        }
      }
    } catch(e) { /* ignore */ }
    return false;
  }

  function compressFile(file, q){
    return new Promise((resolve, reject)=>{
      const reader = new FileReader();
      reader.onload = e=>{
        const img = new Image();
        img.onload = ()=>{
          const c = document.createElement('canvas');
          c.width = img.width; c.height = img.height;
          const ctx = c.getContext('2d');
          ctx.imageSmoothingEnabled = true;
          ctx.drawImage(img, 0, 0);

          // Auto format: keep PNG if it has transparency, else use JPEG for big savings
          let mime = 'image/jpeg';
          if (looksLikePNG(file) && canvasHasAlpha(ctx, c.width, c.height)) mime = 'image/png';

          const qualityFloat = (mime === 'image/jpeg') ? (q/100) : undefined;

          const finalize = (blob)=>{
            if (!blob){
              // Safari fallback
              try {
                const dataURL = c.toDataURL(mime, qualityFloat);
                blob = dataURLToBlob(dataURL);
              } catch(err){ return reject(err); }
            }
            resolve({ blob, width: img.width, height: img.height });
          };

          if (c.toBlob) c.toBlob(finalize, mime, qualityFloat);
          else finalize(null);
        };
        img.onerror = reject;
        img.src = e.target.result;
      };
      reader.onerror = reject;
      reader.readAsDataURL(file);
    });
  }

  async function handleCompress(){
    if (!fileInput || !qualityEl || !out || !compressBtn) return;
    const files = [...fileInput.files];
    if (!files.length){ alert('Please choose at least one image.'); return; }

    const q = parseInt(qualityEl.value, 10) || 75;

    compressBtn.disabled = true; compressBtn.textContent = 'Processing‚Ä¶';
    out.innerHTML = '';

    for (const f of files){
      try{
        const before = f.size;
        const res = await compressFile(f, q);
        const url = URL.createObjectURL(res.blob);

        const card = document.createElement('div');
        card.className = 'thumb';
        card.innerHTML = `
          <img src="${url}" alt="Compressed preview">
          <div class="meta">${safeName(f.name)} ‚Ä¢ ${res.width}√ó${res.height}</div>
          <div class="meta">Before: ${prettyKB(before)} ‚Ä¢ After: ${prettyKB(res.blob.size)}</div>
        `;
        const a = document.createElement('a');
        a.className = 'btn';
        a.href = url;
        a.download = 'compressed-' + safeName(f.name);
        a.textContent = 'Download';
        card.appendChild(a);

        out.appendChild(card);
      }catch(err){
        console.error(err);
        alert('Failed to compress: ' + f.name);
      }
    }

    compressBtn.disabled = false; compressBtn.textContent = 'Compress & Download';
  }

  // (Re)wire the button
  if (compressBtn) {
    compressBtn.addEventListener('click', handleCompress);
  }
</script>
